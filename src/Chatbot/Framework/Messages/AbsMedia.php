<?php


namespace Commune\Chatbot\Framework\Messages;


use Carbon\Carbon;
use Commune\Chatbot\Blueprint\Message\MediaMsg;

abstract class AbsMedia extends AbsMessage implements MediaMsg
{
    const MESSAGE_TYPE = MediaMsg::class;

    /**
     * @var string
     */
    protected $source = '';

    public function __construct(string $resource, Carbon $createdAt = null)
    {
        $this->source = $resource;
        parent::__construct($createdAt);
    }

    public function getSource(): string
    {
        return $this->source;
    }


    public function isEmpty(): bool
    {
        return null;
    }

    public function getText(): string
    {
        return $this->toJson();
    }

    public function toMessageData(): array
    {
        return [
            'src' => $this->source
        ];
    }


    public function namesAsDependency(): array
    {
        $names = parent::namesAsDependency(); // TODO: Change the autogenerated stub
        $names[] = MediaMsg::class;
        $names[] = AbsMedia::class;
        return $names;
    }

}